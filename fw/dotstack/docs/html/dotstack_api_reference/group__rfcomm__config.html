<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>dotstack API Reference: RFCOMM Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">dotstack API Reference
   &#160;<span id="projectnumber">1.8.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">RFCOMM Configuration<div class="ingroups"><a class="el" href="group__spp.html">Serial Port Profile (SPP)</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This module describes parameters used to configure RFCOMM layer.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga95b05505044707d12f536133cc029f77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rfcomm__config.html#ga95b05505044707d12f536133cc029f77">RFCOMM_MAX_SESSIONS</a></td></tr>
<tr class="memdesc:ga95b05505044707d12f536133cc029f77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of remote devices a local device can be connected to.  <a href="#ga95b05505044707d12f536133cc029f77">More...</a><br /></td></tr>
<tr class="separator:ga95b05505044707d12f536133cc029f77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaebd40a9c2095e775e3012208246bab3d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rfcomm__config.html#gaebd40a9c2095e775e3012208246bab3d">RFCOMM_MAX_DLCS</a></td></tr>
<tr class="memdesc:gaebd40a9c2095e775e3012208246bab3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of DLCs.  <a href="#gaebd40a9c2095e775e3012208246bab3d">More...</a><br /></td></tr>
<tr class="separator:gaebd40a9c2095e775e3012208246bab3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5d70a5ec0061a2e4cac0de7241e3bf4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rfcomm__config.html#gaa5d70a5ec0061a2e4cac0de7241e3bf4">RFCOMM_MAX_SERVER_CHANNELS</a></td></tr>
<tr class="memdesc:gaa5d70a5ec0061a2e4cac0de7241e3bf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of Server channels.  <a href="#gaa5d70a5ec0061a2e4cac0de7241e3bf4">More...</a><br /></td></tr>
<tr class="separator:gaa5d70a5ec0061a2e4cac0de7241e3bf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga898bbf30e9a073f177d6fe6d328c0aec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rfcomm__config.html#ga898bbf30e9a073f177d6fe6d328c0aec">RFCOMM_INFO_LEN</a></td></tr>
<tr class="memdesc:ga898bbf30e9a073f177d6fe6d328c0aec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size of the data portion of a UIH frame.  <a href="#ga898bbf30e9a073f177d6fe6d328c0aec">More...</a><br /></td></tr>
<tr class="separator:ga898bbf30e9a073f177d6fe6d328c0aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e3df4f4efac1e0e190d9c2b6a506e22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rfcomm__config.html#ga6e3df4f4efac1e0e190d9c2b6a506e22">RFCOMM_MAX_CMD_BUFFERS</a></td></tr>
<tr class="memdesc:ga6e3df4f4efac1e0e190d9c2b6a506e22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of command buffers.  <a href="#ga6e3df4f4efac1e0e190d9c2b6a506e22">More...</a><br /></td></tr>
<tr class="separator:ga6e3df4f4efac1e0e190d9c2b6a506e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e2a9e9ca7d4ae86c3a41a9ad194bfbc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rfcomm__config.html#ga1e2a9e9ca7d4ae86c3a41a9ad194bfbc">RFCOMM_LOCAL_CREDIT</a></td></tr>
<tr class="memdesc:ga1e2a9e9ca7d4ae86c3a41a9ad194bfbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of receive buffers.  <a href="#ga1e2a9e9ca7d4ae86c3a41a9ad194bfbc">More...</a><br /></td></tr>
<tr class="separator:ga1e2a9e9ca7d4ae86c3a41a9ad194bfbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29acbd2540864a3d42c5d4f7f40975fb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rfcomm__config.html#ga29acbd2540864a3d42c5d4f7f40975fb">RFCOMM_ENABLE_MULTIDEVICE_CHANNELS</a>&#160;&#160;&#160;BT_FALSE</td></tr>
<tr class="memdesc:ga29acbd2540864a3d42c5d4f7f40975fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable multi-device server channels.  <a href="#ga29acbd2540864a3d42c5d4f7f40975fb">More...</a><br /></td></tr>
<tr class="separator:ga29acbd2540864a3d42c5d4f7f40975fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module describes parameters used to configure RFCOMM layer. </p>
<p>dotstack is customized using a configuration file. The configuration file tailors the dotstack to the application being built. It has to have the structure shown below.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;cdbt/bt/bt_std.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// HCI and L2CAP must always be present</span></div>
<div class="line"><span class="comment">// SDP is required only if stack is running in dual mode. This is the default mode.</span></div>
<div class="line"><span class="comment">// To run the stack in single mode (i.e. only BLE is supported) a BT_BLE_SINGLE_MODE symbol</span></div>
<div class="line"><span class="comment">// must be defined:</span></div>
<div class="line"><span class="comment">// #define BT_BLE_SINGLE_MODE</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// HCI configuration parameters</span></div>
<div class="line"><span class="preprocessor">#define HCI_MAX_CMD_BUFFERS            ...</span></div>
<div class="line"><span class="preprocessor">#define HCI_MAX_DATA_BUFFERS           ...</span></div>
<div class="line"><span class="preprocessor">#define HCI_MAX_HCI_CONNECTIONS        ...</span></div>
<div class="line"><span class="preprocessor">#define HCI_RX_BUFFER_LEN              ...</span></div>
<div class="line"><span class="preprocessor">#define HCI_TX_BUFFER_LEN              ...</span></div>
<div class="line"><span class="preprocessor">#define HCI_L2CAP_BUFFER_LEN           ...</span></div>
<div class="line"><span class="preprocessor">#define HCI_MAX_CMD_PARAM_LEN          ...</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// L2CAP configuration parameters</span></div>
<div class="line"><span class="preprocessor">#define L2CAP_MAX_CMD_BUFFERS          ...</span></div>
<div class="line"><span class="preprocessor">#define L2CAP_MAX_FRAME_BUFFERS        ...</span></div>
<div class="line"><span class="preprocessor">#define L2CAP_MAX_PSMS                 ...</span></div>
<div class="line"><span class="preprocessor">#define L2CAP_MAX_CHANNELS             ...</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// SDP configuration parameters</span></div>
<div class="line"><span class="preprocessor">#define SDP_MAX_SEARCH_RESULT_LEN     ...</span></div>
<div class="line"><span class="preprocessor">#define SDP_MAX_ATTRIBUTE_RESULT_LEN   ...</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Depending on protocols and profiles used below goes configuration parameters</span></div>
<div class="line"><span class="comment">// for each used module. E.g., to use and configure RFCOMM,</span></div>
<div class="line"><span class="comment">// the following values must be defined:</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define RFCOMM_MAX_SESSIONS            ...</span></div>
<div class="line"><span class="preprocessor">#define RFCOMM_MAX_DLCS                ...</span></div>
<div class="line"><span class="preprocessor">#define RFCOMM_MAX_SERVER_CHANNELS     ...</span></div>
<div class="line"><span class="preprocessor">#define RFCOMM_INFO_LEN                ...</span></div>
<div class="line"><span class="preprocessor">#define RFCOMM_MAX_DATA_BUFFERS        ...</span></div>
<div class="line"><span class="preprocessor">#define RFCOMM_MAX_CMD_BUFFERS         ...</span></div>
<div class="line"><span class="preprocessor">#define RFCOMM_LOCAL_CREDIT            ...</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;cdbt/bt/bt_oem_config.h&quot;</span></div>
</div><!-- fragment --> <h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga29acbd2540864a3d42c5d4f7f40975fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RFCOMM_ENABLE_MULTIDEVICE_CHANNELS&#160;&#160;&#160;BT_FALSE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable multi-device server channels. </p>
<p>Normally each server channel can be used only once. I.e. if device A connected to channel 1, device B cannot connect to channel 1 until device A disconnects. With this option it is possible to make channels accept connections from several devices at the same time. I.e., if RFCOMM_ENABLE_MULTIDEVICE_CHANNELS is TRUE both device A and device B can connect to channel 1 at the same time. </p>

</div>
</div>
<a class="anchor" id="ga898bbf30e9a073f177d6fe6d328c0aec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RFCOMM_INFO_LEN</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum size of the data portion of a UIH frame. </p>
<p>This parameter defines the maximum size of the data portion of a UIH frame. If CFC is used the actual length of the data portion will be 1 byte less. This value must be less than or equal to HCI_L2CAP_BUFFER_LEN - RFCOMM_FRAME_HEADER_LEN - L2CAP_HEADER_LEN. </p>

</div>
</div>
<a class="anchor" id="ga1e2a9e9ca7d4ae86c3a41a9ad194bfbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RFCOMM_LOCAL_CREDIT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of receive buffers. </p>
<p>This parameter defines the number of received UIH frames that can be stored on the local device. The flow control mechanism used in RFCOMM ensures that the remote side of the link always knows how many free buffers left on the local device. When the number of free buffers reaches 0, the transmitter stops sending data frames until the receiver frees some buffers. The RFCOMM layer does not actually allocate space for buffers. It uses RFCOMM_LOCAL_CREDIT to keep track of free buffers and report them to the remote side. Actual memory allocation is done in SPP layer. </p>

</div>
</div>
<a class="anchor" id="ga6e3df4f4efac1e0e190d9c2b6a506e22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RFCOMM_MAX_CMD_BUFFERS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of command buffers. </p>
<p>This parameter defines the maximum number of commands that can be sent at the same time. It is usually enough to reserve 2 buffers for each DLC excluding control DLC. Therefore, this value can be defined as <br />
 #define RFCOMM_MAX_CMD_BUFFERS (RFCOMM_MAX_DLCS - 1) * 2 </p>

</div>
</div>
<a class="anchor" id="gaebd40a9c2095e775e3012208246bab3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RFCOMM_MAX_DLCS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of DLCs. </p>
<p>This parameter defines the maximum number of DLCs on each session. This value should be at least 2 because each session uses one DLC to convey multiplexer control messages. All other DLCs are used to emulate serial ports. </p>

</div>
</div>
<a class="anchor" id="gaa5d70a5ec0061a2e4cac0de7241e3bf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RFCOMM_MAX_SERVER_CHANNELS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of Server channels. </p>
<p>This parameter defines the maximum number of server channels exposed by the local device. This value should not exceed RFCOMM_MAX_DLCS - 1. </p>

</div>
</div>
<a class="anchor" id="ga95b05505044707d12f536133cc029f77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RFCOMM_MAX_SESSIONS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of remote devices a local device can be connected to. </p>
<p>This parameter defines the maximum number of remote devices a local device can have simultaneous connections to. This value should not exceed HCI_MAX_HCI_CONNECTIONS. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>Copyright &copy; 2015 SEARAN LLC. All right reserved.</small></address>
</body>
</html>
